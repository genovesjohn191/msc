<mcs-page [header]="header">
  <!-- Left Panel -->
  <mcs-left-panel *mcsLeftPanelDef="firewallTextContent.leftPanelHeader">
    <!-- listing panel -->
    <mcs-left-panel-item *mcsLeftPanelItemDef [header]="firewallTextContent.panel">
      <div class="listing-panel-wrapper">
        <mcs-search #listSearch [delayInSeconds]="0"></mcs-search>
        <mcs-list-panel [listSource]="firewallListSource"
          [selectedListItem]="selectedItem" [searchMode]="firewallListSource?.searchMode"
          [mcsLoader]="firewallListSource?.firewallsSubscription">
          <ng-container mcsListPanelDef>
            <mcs-list-panel-header [groupName]="haGroup"
              *mcsListPanelHeaderDef="let haGroup; propertyName: 'haGroupName';">
              <span>{{ haGroup }}</span>
            </mcs-list-panel-header>
            <mcs-list-panel-item *mcsListPanelItemDef="let firewall"
              [itemId]="firewall.id" [groupName]="firewall.haGroupName"
              (click)="onFirewallSelect(firewall.id)">
              <mcs-icon [key]="getConnectionStatusIconKey(firewall.connectionStatus)"></mcs-icon>
              <a>{{ firewall.name }}</a>
            </mcs-list-panel-item>
          </ng-container>

          <!-- List Items Status Integration -->
          <ng-container mcsListItemsStatusDef>
            <mcs-list-items-empty *mcsListItemsEmptyDef>
              <span>{{ firewallsTextContent.noFirewalls }}</span>
            </mcs-list-items-empty>
            <mcs-list-items-error *mcsListItemsErrorDef>
              <div class="data-error">
                <span>{{ firewallsTextContent.errorMessage }}</span>
                <a (click)="retryListsource()">{{ firewallsTextContent.retry }}</a>.
              </div>
            </mcs-list-items-error>
          </ng-container>
        </mcs-list-panel>
      </div>
    </mcs-left-panel-item>
  </mcs-left-panel>

  <mcs-content-panel *mcsContentPanelDef>
    <div class="content-wrapper" [mcsLoader]="subscription">
      <div class="mcs-tabs">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" role="tab"
              [routerLink]="['overview']" routerLinkActive="active">
                {{ firewallTextContent.overview.label }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" role="tab"
              [routerLink]="['policies']" routerLinkActive="active">
              {{ firewallTextContent.policies.label }}</a>
          </li>
          <li class="nav-item action-cog">
            <mcs-icon class="action" [key]="cogIconKey" size="medium"
              mcsPopover placement="bottom" orientation="left" theme="light"
              padding="narrow" [content]="actionContent" cursor="pointer">
            </mcs-icon>
            <ng-template #actionContent>
              <div class="action-container">
                <a [href]="firewall.url" target="_blank">View in Portal</a>
              </div>
            </ng-template>
          </li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane active" role="tabpanel">
            <router-outlet></router-outlet>
          </div>
        </div>
      </div>
    </div>
  </mcs-content-panel>
</mcs-page>