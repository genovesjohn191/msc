<mcs-page>
  <!-- Page template header -->
  <ng-container *mcsPageHeader>
    <div class="inline-items-small">
      <div><h1>{{ selectedMedium?.catalogName }}</h1></div>
      <div *ngIf="selectedMedium">
        <mcs-icon [key]="angleDoubleRightIconKey" size="xsmall"></mcs-icon>
      </div>
      <div><h1>{{ selectedMedium?.name }}</h1></div>
    </div>
  </ng-container>

  <!-- Left Panel -->
  <mcs-left-panel *mcsLeftPanelDef="textContent.leftPanelHeader">
    <!-- listing panel -->
    <mcs-left-panel-item *mcsLeftPanelItemDef>
      <div class="listing-panel-wrapper">
        <mcs-search #search></mcs-search>

        <mcs-data-status [dataStatusFactory]="listStatusFactory">
          <mcs-data-status-success mcsDataSuccess>

            <mcs-list-panel>
              <ng-container *ngFor="let iterator of (mediaMap | mcsMapIterable) |
                mcsSortArray: mediaListSource?.catalogSortMethod">

                <mcs-option-group>
                  <ng-container *mcsOptionGroupLabel>
                    <span>{{ iterator.key }}</span>
                  </ng-container>

                  <ng-container *ngFor="let medium of (iterator.value |
                    mcsSortArray: mediaListSource?.mediaSortMethod)">
                    <a [mcsRouterLink]="[routeKeyEnum.Media, medium.id]"
                      mcsEventTracker="select-media"
                      mcsEventCategory="media"
                      mcsEventLabel="media-list-panel">

                      <mcs-option [value]="medium"
                        [selected]="selectedMedium?.id === medium.id">
                        <div class="space-left-xsmall">
                          <span class="word-wrap">{{ medium.name }}</span>
                        </div>
                      </mcs-option>
                    </a>
                  </ng-container>

                </mcs-option-group>
              </ng-container>
            </mcs-list-panel>
          </mcs-data-status-success>

          <mcs-data-status-in-progress mcsDataInProgress>
            <span>{{ mediaTextContent.loading }}</span>
          </mcs-data-status-in-progress>

          <mcs-data-status-empty mcsDataEmpty>
            <span>{{ mediaTextContent.noMedia }}</span>
          </mcs-data-status-empty>

          <mcs-data-status-error mcsDataError>
            <span>{{ mediaTextContent.errorMessage }}</span>
          </mcs-data-status-error>
        </mcs-data-status>
      </div>
    </mcs-left-panel-item>
  </mcs-left-panel>

  <mcs-content-panel *mcsContentPanelDef>
    <div class="routing-tab-wrapper" *mcsComponentHandler>
      <mcs-tab-group [selectedTabId]="selectedRoutingTab" (tabChanged)="onTabChanged($event)">
        <!-- Overview Tab -->
        <mcs-tab [label]="textContent.overview.label" id="overview"></mcs-tab>

        <!-- Servers Tab -->
        <mcs-tab [label]="textContent.servers.label" id="servers"></mcs-tab>
      </mcs-tab-group>

      <!-- Tab content for routing tab -->
      <div class="limited-view routing-tab-content-wrapper">
        <mcs-loader [subscriptions]="mediumSubscription"
          [loadingText]="textContent.loading"
          [loadingPlacement]="top">
          <div><router-outlet></router-outlet></div>
        </mcs-loader>
      </div>
    </div>
  </mcs-content-panel>
</mcs-page>