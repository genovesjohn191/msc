<div class="limited-view">
  <div class="contextual-help-page-wrapper">
    <div class="item-margin" *mcsComponentHandler>
      <mcs-alert type="error">
        {{ textContent.errors.mediaUploadError }}
        <a mcsButton="basic" color="error" mcsAlertAction="dismiss"
          mcsId
          mcsEventTracker="dissmiss-media-error"
          mcsEventCategory="media"
          mcsEventLabel="upload-media-page">
          {{ textContent.mediaUploadDismissLabel }}
        </a>
      </mcs-alert>
    </div>

    <p>{{ textContent.description }}</p>

    <form [formGroup]="fgMediaUpload" mcsFormGroup>
      <!-- Resource Select -->
      <div class="item-margin">
        <mcs-form-field>
          <mcs-select [formControl]="fcResources" required
            mcsId="select-resource"
            (change)="onChangeResource($event)"
            [placeholder]="textContent.selectResources"
            [mcsContextualHelp]="textContent.selectResourcesHelp">

            <mcs-option-group>
              <ng-container *mcsOptionGroupHeader>
                VDC
              </ng-container>
              <mcs-option *ngFor="let resource of resources$ | async" [value]="resource">
                {{ resource.name }}
              </mcs-option>
            </mcs-option-group>
          </mcs-select>

          <mcs-error mcsError errorState="required">
            {{ textContent.errors.selectResourceRequired }}
          </mcs-error>
        </mcs-form-field>
      </div>

      <!-- Catalog Select -->
      <div class="item-margin">
        <mcs-form-field>
          <mcs-select [formControl]="fcCatalogs" required
            mcsId="select-catalog"
            (change)="onChangeCatalog($event)"
            [placeholder]="textContent.selectCatalog"
            [mcsContextualHelp]="textContent.selectCatalogHelp">

            <mcs-option-group>
              <ng-container *mcsOptionGroupHeader>
                {{ textContent.selectCatalogHeader }}
              </ng-container>
              <mcs-option *ngFor="let catalog of catalogItems$ | async" [value]="catalog">
                {{ catalog.name }}
              </mcs-option>
            </mcs-option-group>
          </mcs-select>

          <mcs-error mcsError errorState="required">
            {{ textContent.errors.selectResourceCatalog }}
          </mcs-error>
        </mcs-form-field>
      </div>

      <!-- Media Name  -->
      <div class="item-margin">
        <mcs-form-field>
          <input mcsInput #mediaName required mcsId="input-media-name" mcsSetFocus
            [placeholder]="textContent.mediaName" maxlength="25"
            [formControl]="fcMediaName"
            [mcsContextualHelp]="textContent.mediaNameHelp">

          <mcs-hint mcsHint align="start">
            <mcs-hint-message type="maxChar"
              [value]="mediaName.maxLength">
            </mcs-hint-message>
          </mcs-hint>
          <mcs-hint mcsHint align="end">
            {{ mediaName.value.length }} / {{ mediaName.maxLength }}
          </mcs-hint>

          <mcs-error mcsError errorState="required">
            {{ textContent.errors.mediaNameRequired }}
          </mcs-error>
          <mcs-error mcsError errorState="mediaNameInvalid">
            {{ textContent.errors.mediaNameInvalid }}
          </mcs-error>
        </mcs-form-field>
      </div>

      <!-- Media URL  -->
      <div class="item-margin">
        <mcs-form-field>
          <input mcsInput #mediaUrl required mcsId="input-media-url"
            [placeholder]="textContent.mediaUrl" maxlength="300"
            [formControl]="fcMediaUrl"
            [mcsContextualHelp]="textContent.mediaUrlHelp"
            (blur)="onBlurMediaUrl()">

          <mcs-suffix *ngIf="mediaUrlStatusIconKey">
            <mcs-icon [key]="mediaUrlStatusIconKey" size="small" ></mcs-icon>
          </mcs-suffix>

          <mcs-hint mcsHint align="start" *ngIf="urlInfoMessage">
            <mcs-data-status-warning>{{ urlInfoMessage }}</mcs-data-status-warning>
          </mcs-hint>
          <mcs-hint mcsHint align="start" *ngIf="!urlInfoMessage">
            <mcs-hint-message type="maxChar"
              [value]="mediaUrl.maxLength"></mcs-hint-message>
          </mcs-hint>
          <mcs-hint mcsHint align="end">
            {{ mediaUrl.value.length }} / {{ mediaUrl.maxLength }}
          </mcs-hint>

          <mcs-error mcsError errorState="required">
            {{ textContent.errors.mediaUrlRequired }}
          </mcs-error>
          <mcs-error mcsError errorState="url">
            {{ textContent.errors.mediaUrlInvalid }}
          </mcs-error>
          <mcs-error mcsError errorState="urlValidationError">
            {{ urlInfoMessage }}
          </mcs-error>
        </mcs-form-field>
      </div>

      <!-- Media Description  -->
      <div class="item-margin">
        <mcs-form-field>
          <input mcsInput #mediaDescription mcsId="input-media-description"
            [placeholder]="textContent.mediaDescription" maxlength="1000"
            [formControl]="fcMediaDescription"
            [mcsContextualHelp]="textContent.mediaDescriptionHelp">

          <mcs-hint mcsHint align="start">
            <mcs-hint-message type="maxChar"
              [value]="mediaDescription.maxLength"></mcs-hint-message>
          </mcs-hint>
          <mcs-hint mcsHint align="end">
            {{ mediaDescription.value.length }} / {{ mediaDescription.maxLength }}
          </mcs-hint>
        </mcs-form-field>
      </div>
    </form>

    <!-- Wizard Actions -->
    <div class="action-items">
      <button mcsButton size="small" arrow="right"
        mcsWizardStepNext
        [mcsWizardStepNextWhen]="uploadMediaFunc"
        mcsId="step-1-next"
        mcsEventTracker="step-1-next"
        mcsEventCategory="media"
        mcsEventLabel="upload-media-page">Next</button>
    </div>
  </div>
</div>