<mcs-page [header]="selectedPlatform?.resourceName">

  <!-- Left Panel -->
  <mcs-left-panel *mcsLeftPanelDef="textContent.leftPanelHeader">
    <!-- listing panel -->
    <mcs-left-panel-item *mcsLeftPanelItemDef>
      <div class="listing-panel-wrapper">
        <mcs-search #search></mcs-search>

        <mcs-data-status [dataStatusFactory]="listStatusFactory">
          <mcs-data-status-success mcsDataSuccess>

            <mcs-list-panel>
              <ng-container *ngFor="let iterator of (serversMap | mcsMapIterable) |
                mcsSortArray: serverListSource?.sortResourceMethod">

                <mcs-option-group [selected]="isSelected(iterator.key)">
                  <ng-container *mcsOptionGroupLabel>
                    <ng-container *ngIf="iterator.key?.resourceId">
                      <a (click)="onSelectVdcByName($event, iterator.key)">
                        {{ iterator.key?.resourceName }}
                      </a>
                    </ng-container>
                    <ng-container *ngIf="!iterator.key?.resourceId">
                      <span>{{ iterator.key?.resourceName }}</span>
                    </ng-container>
                  </ng-container>

                  <mcs-option *ngFor="let server of (iterator.value | mcsSortArray: serverListSource?.serversSortMethod)"
                    [value]="server"
                    [disabled]="serverDeleting(server)"
                    (click)="onServerSelect(server)">

                    <mcs-icon *ngIf="!server.isProcessing" size="small"
                      [key]="server.powerStateIconKey"></mcs-icon>

                    <mcs-icon *ngIf="server.isProcessing"
                      size="small" [key]="spinnerIconKey"
                      [mcsTooltip]="server.processingText"
                      mcsTooltipPosition="right"></mcs-icon>

                    <span class="space-left-xsmall">{{ server.name }}</span>
                  </mcs-option>
                </mcs-option-group>
              </ng-container>
            </mcs-list-panel>
          </mcs-data-status-success>

          <mcs-data-status-in-progress mcsDataInProgress>
            <span>{{ serversTextContent.loading }}</span>
          </mcs-data-status-in-progress>

          <mcs-data-status-empty mcsDataEmpty>
            <span>{{ serversTextContent.noServers }}</span>
          </mcs-data-status-empty>

          <mcs-data-status-error mcsDataError>
            <span>{{ serversTextContent.errorMessage }}</span>
          </mcs-data-status-error>
        </mcs-data-status>
      </div>
    </mcs-left-panel-item>
  </mcs-left-panel>

  <mcs-content-panel *mcsContentPanelDef>
    <div class="routing-tab-wrapper">
      <mcs-tab-group [selectedTabId]="selectedRoutingTab" (tabChanged)="onTabChanged($event)">
        <!-- Overview Tab -->
        <mcs-tab [label]="textContent.overview.label" id="overview">
        </mcs-tab>
      </mcs-tab-group>

      <!-- Tab content for routing tab -->
      <div class="routing-tab-content-wrapper position-relative">
        <!-- Loader settings -->
        <div [mcsLoader]="vdcSubscription"
          [mcsLoaderHideElement]="tabContent"
          [mcsLoaderText]="textContent.loading"
          mcsLoaderOrientation="top"></div>

        <router-outlet #tabContent></router-outlet>
      </div>
    </div>
  </mcs-content-panel>
</mcs-page>
