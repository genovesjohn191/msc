<section *ngIf="server && !isServerScale" class="server-management-container">
  <div class="server-thumbnail">
    <mcs-icon *ngIf="!thumbnailVisible" [key]="spinnerIconKey" size="xlarge"></mcs-icon>
    <img #thumbnailElement [@animate]="thumbnailFadeIn" class="w-100 thumbnail"/>
  </div>
  <a href="#">View Console</a>
  <!-- TODO: Waiting for mapping of api response properties to view properties -->
  <div class="server-details">
    <div class="row">
      <div class="col">
        <h3>{{ serverManagementTextContent.vmProperties.title }}</h3>
        <ul class="unstyled-list">
          <li>{{ serverManagementTextContent.vmProperties.image }}: {{ server.guestOs }}</li>
          <li>{{ serverManagementTextContent.vmProperties.zone }}: {{ server.availabilityZone }}</li>
          <li>{{ serverManagementTextContent.vmProperties.configuration }}:
            {{ server.memoryMB }} MB / {{ server.cpuCount }} CPU
            <a (click)="isServerScale = true">
              {{ serverManagementTextContent.performanceScale.scale }}</a>
          </li>
          <li>{{ serverManagementTextContent.vmProperties.media }}:
            <ul class="unstyled-list server-media" *ngIf="hasMedia; else elseBlock">
              <li *ngFor="let media of server.media">{{ media.mediaName }}</li>
            </ul>
            <ng-template #elseBlock>None</ng-template>
            <a>Attach</a>
          </li>
        </ul>
      </div>

      <div class="col">
        <h3>{{ serverManagementTextContent.networkInformation.title }}</h3>
        <ul class="unstyled-list server-interfaces">
          <li>{{ serverManagementTextContent.networkInformation.publicIp }}: {{ server.managementIpAddress }}</li>
          <li *ngFor="let interface of server.interfaces; let i = index">
            {{ serverManagementTextContent.networkInformation.interface }} {{ i }} :
            <span>{{ interface.ipAddress.join(', ') }}</span>
          </li>
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <h4>{{ serverManagementTextContent.storage.title }} <a [routerLink]="['../storage']">Manage</a></h4>
        <ul class="unstyled-list server-storage">
          <li>{{ serverManagementTextContent.storage.primaryVolume }}: {{ primaryVolume }}</li>
          <li *ngIf="secondaryVolumes">
            {{ serverManagementTextContent.storage.secondaryVolumes }}: {{ secondaryVolumes }}
          </li>
          <li *ngIf="server.storagePolicy">
            {{ serverManagementTextContent.storage.storagePolicy }}: {{ server.storagePolicy }}
          </li>
        </ul>
      </div>

      <div class="col">
        <h3>{{ serverManagementTextContent.supportIdentifiers.title }}</h3>
        <ul class="unstyled-list">
          <li>{{ serverManagementTextContent.supportIdentifiers.vdc }}: {{ server.vdcName }}</li>
          <li>{{ serverManagementTextContent.supportIdentifiers.macViewServiceId }}: {{ server.serviceId }}</li>
          <li>{{ serverManagementTextContent.supportIdentifiers.vmWareId }}: {{ server.instanceId }}</li>
        </ul>
      </div>
    </div>

    <div *ngIf="isManaged">
      <hr/>
      <h3>{{ serverManagementTextContent.manageServices.title }}</h3>
      <p>{{ serverManagementTextContent.manageServices.description }}</p>
      <mcs-button iconRight="arrow-right">Configure Now</mcs-button>
    </div>
  </div>

</section>

<section *ngIf="server && isServerScale" class="server-performance-scale-container">
  <h3>Server {{ server.managementName }}</h3>
  <mcs-server-performance-scale
    [memoryMB]="server.memoryMB" [cpuCount]="server.cpuCount"
    availableMemoryMB="4096" availableCpuCount="8"
    (scaleChanged)="onScaleChanged($event)">

    <!--Performance scale container-->
    <span slider-details>
      {{ serverManagementTextContent.performanceScale.sliderGuidance }}
    </span>
    <span custom-details>
      {{ serverManagementTextContent.performanceScale.customGuidance }}
    </span>
  </mcs-server-performance-scale>

  <div class="note">
    <mcs-icon [key]="warningIconKey" size="medium"></mcs-icon>
    <span>{{ serverManagementTextContent.performanceScale.warning }}</span>
  </div>

  <div class="scaling">
    <a class="text-underline" (click)="isServerScale = false">
      {{ serverManagementTextContent.performanceScale.cancel }}</a>
    <mcs-button size="small" class="scale"
      (click)="onClickScale(scaleModal)">
        {{ serverManagementTextContent.performanceScale.scale }}</mcs-button>
  </div>
</section>