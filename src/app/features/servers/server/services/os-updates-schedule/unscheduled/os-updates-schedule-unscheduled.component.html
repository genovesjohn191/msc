<mcs-presentation-panel>
  <ng-container mcsPresentationPanelHeader>
    <mcs-item orientation="separated" full-width>
      <h2>{{ textContent.title }}</h2>
      <ng-content select="[mcsViewServicesTab]"></ng-content>
    </mcs-item>
  </ng-container>
  <p>{{ textContent.description }}</p>
  <section>
    <!-- Action Buttons -->
    <mcs-item>
      <strong>
        {{ textContent.listLabel }}
      </strong>
      <button mcsButton mcsAlign="end" size="medium" (click)="applySelectedUpdates()" [disabled]="isApplyButtonDisabled">
        {{ textContent.applyUpdatesButton }}
      </button>
    </mcs-item>

    <mcs-data-status [dataStatusFactory]="dataStatusFactory">
      <mcs-data-status-success mcsDataSuccess>
        <!-- Tree View -->
        <div mcsScrollable class="action-box" [ngStyle]="{'max-height': '400px'}" *ngIf="osUpdates$ | async as osUpdates">
          <mcs-tree (selectionChange)="onTreeChange($event)" [disabled]="selectedServer.isProcessing">
            <mcs-tree-node-group [label]="textContent.listAllSelection" checkable>
              <mcs-tree-node *ngFor="let osUpdate of osUpdates" [value]="osUpdate">
                <mcs-item>
                  <span>{{osUpdate.name}}</span>
                  <span *ngIf="!selectedServer?.isWindows" read-only> {{osUpdate.properties?.version}}</span>
                </mcs-item>
              </mcs-tree-node>
            </mcs-tree-node-group>
          </mcs-tree>
        </div>
      </mcs-data-status-success>

      <mcs-data-status-in-progress mcsDataInProgress>
        <span>{{ textContent.osUpdatesloadingContent }}</span>
      </mcs-data-status-in-progress>

      <mcs-data-status-error mcsDataError>
        <span>{{ textContent.errorOsUpdates }}</span>
      </mcs-data-status-error>
    </mcs-data-status>
  </section>

</mcs-presentation-panel>
