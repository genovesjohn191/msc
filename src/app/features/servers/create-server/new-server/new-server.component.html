<form [formGroup]="fgNewServer">
  <!-- Server Name Input -->
  <div class="field">
    <mcs-form-field>
      <input mcsInput #serverNameInput set-focus required
        placeholder="Enter a server name" maxlength="15"
        [formControl]="fcServerName"
        [mcsContextualHelp]="textHelpContent.serverNameField">

      <mcs-hint mcsHint align="start">
        {{ convertMaxCharText(textContent.hints.serverNameMax, serverNameInput.maxLength) }}
      </mcs-hint>
      <mcs-hint mcsHint align="end">
        {{ serverNameInput.value.length }} / {{ serverNameInput.maxLength }}
      </mcs-hint>

      <mcs-error mcsError errorState="required">
        {{ textContent.errors.serverNameRequired }}
      </mcs-error>
      <mcs-error mcsError errorState="invalidServerName">
        {{ textContent.errors.invalidServerName }}
      </mcs-error>
    </mcs-form-field>
  </div>

  <!-- Virtual Applications Selection -->
  <div class="field">
    <mcs-form-field>
      <mcs-select [formControl]="fcVApp"
        [mcsContextualHelp]="textHelpContent.vAppField"
        [placeholder]="textContent.placeholder.vApp">
        <mcs-select-group [header]="textContent.headers.vApp">
          <mcs-select-item>-</mcs-select-item>
          <mcs-select-item *ngFor="let vApp of resource?.vApps" [value]="vApp">
            {{ vApp.name }}
          </mcs-select-item>
        </mcs-select-group>
      </mcs-select>

      <mcs-error mcsError errorState="required">
        {{ textContent.errors.selectVappRequired }}
      </mcs-error>
    </mcs-form-field>
  </div>

  <!-- Imges Selection -->
  <div class="field">
    <mcs-form-field>
      <mcs-select [formControl]="fcImage" required
        [placeholder]="textContent.placeholder.image"
        [mcsContextualHelp]="textHelpContent.serverTemplateField">
        <!-- Os Group -->
        <mcs-select-group [header]="textContent.headers.os">
          <mcs-select-item *ngFor="let platform of (operatingSystemsMap | mcsMapIterable)">
            {{ platform.key }}
            <mcs-select-group sub-group>
              <mcs-select-item *ngFor="let os of platform.value" [value]="os">
                {{ os.name }}
              </mcs-select-item>
            </mcs-select-group>
          </mcs-select-item>
        </mcs-select-group>

        <!-- Template Group -->
        <mcs-select-group [header]="textContent.headers.templates">
          <mcs-select-item *ngFor="let catalog of resource?.catalogItems" [value]="catalog">
            {{ catalog.name }}
          </mcs-select-item>
        </mcs-select-group>
      </mcs-select>

      <mcs-error mcsError errorState="required">
        {{ textContent.errors.selectImageRequired }}
      </mcs-error>
    </mcs-form-field>
  </div>

  <!-- Server RAM -->
  <div class="field">
    <mcs-server-performance-scale
      [memoryMB]="scaleMemoryMB" [cpuCount]="scaleCpuCount"
      [availableMemoryMB]="scaleAvailableMemoryMB" [availableCpuCount]="scaleAvailableCpuCount"
      (scaleChanged)="onScaleChanged($event)"
      [mcsContextualHelp]="textHelpContent.computeField">
      <!--Performance scale contents on the left hand side (title and description)-->
      <div title>
        <span class="label no-line-height">{{ textContent.computeSizeLabel }}</span>
      </div>
    </mcs-server-performance-scale>
  </div>

  <!-- Storage Management -->
  <div class="field">
    <mcs-server-manage-storage
      [minimumMB]="storageMinMemoryMB"
      [maximumMB]="storageMaxMemoryMB"
      [step]="storageSliderStep"
      [storageProfileList]="resource?.storage"
      [mcsContextualHelp]="textHelpContent.storageField"
      (storageChanged)="onStorageChanged($event)">
      <!--Server manage storage contents on the left hand side (title and description)-->
      <div mcsStorageTitle>
        <span class="label no-line-height">{{ textContent.storageLabel }}</span>
      </div>

      <div mcsStorageWarning>
        <span>{{ storageWarning }}</span>
      </div>
    </mcs-server-manage-storage>
  </div>

  <!-- Network Selection -->
  <div class="field">
    <span class="label">{{ textContent.networkLabel }}</span>
    <mcs-form-field>
      <mcs-select [(ngModel)]="selectedNetwork" required
        [formControl]="fcNetwork"
        [placeholder]="textContent.placeholder.network"
        [mcsContextualHelp]="textHelpContent.networkField">
        <mcs-select-group [header]="textContent.headers.network">
          <mcs-select-item *ngFor="let network of resource?.networks" [value]="network">
            {{ network.name }}
          </mcs-select-item>
        </mcs-select-group>
      </mcs-select>

      <mcs-error mcsError errorState="required">
        {{ textContent.errors.selectNetworkRequired }}
      </mcs-error>
    </mcs-form-field>
  </div>

  <!-- IP Address setting -->
  <div class="field">
    <mcs-server-ip-address [gateway]="selectedNetwork?.gateway"
      [subnetMask]="selectedNetwork?.netmask"
      (ipAddressChanged)="onIpAddressChanged($event)">
      <!--Ip address contents on the left hand side (title and description)-->
      <div title>
        <span class="label no-line-height">{{ textContent.ipAddressLabel }}</span>
      </div>
    </mcs-server-ip-address>
  </div>
</form>