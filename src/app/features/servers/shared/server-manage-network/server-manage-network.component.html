<form [formGroup]="fgNetwork" mcsFormGroup>
  <!-- Network header -->
  <ng-content select="[mcsManageNetworkHeader]"></ng-content>

  <!-- Network selection -->
  <mcs-form-field>
    <mcs-select mcsId="select-network" [ngModelOptions]="{standalone: true}"
      [(ngModel)]="selectedNetwork" placeholder="Select network">
      <mcs-option-group>
        <ng-container *mcsOptionGroupHeader>Networks</ng-container>
        <mcs-option *ngFor="let network of networks" [value]="network">
          {{ network.name }}
        </mcs-option>
      </mcs-option-group>
    </mcs-select>
  </mcs-form-field>

  <!-- Network switcher -->
  <mcs-item orientation="separated">
    <h2 auto-width>IP address</h2>
    <div *ngIf="!disableDynamicIp">
      <a *ngIf="inputManageType === inputManageTypeEnum.Custom" mcsId
        (click)="onChangeInputManageType(inputManageTypeEnum.Auto)">
        {{ textContent.buttonSwitch }}</a>
      <a *ngIf="inputManageType === inputManageTypeEnum.Auto" mcsId
        (click)="onChangeInputManageType(inputManageTypeEnum.Custom)">
        {{ textContent.customSwitch }}</a>
    </div>
  </mcs-item>

  <div [ngSwitch]="inputManageType">
    <!-- Ip address DHCP Mode -->
    <mcs-section [@fadeIn] *ngSwitchCase="inputManageTypeEnum.Auto">
      <div>{{ textContent.buttonMessage }}</div>

      <mcs-radio-button-group orientation="vertical" [formControl]="fcIpAllocationMode">
        <mcs-radio-button *ngFor="let item of ipAddressItems" [value]="item.value" mcsId>
          {{ item.text }}
        </mcs-radio-button>
      </mcs-radio-button-group>

      <ng-content select="[mcsManageNetworkWarning]"></ng-content>
    </mcs-section>

    <!-- IP address custom mode -->
    <mcs-section [@fadeIn] *ngSwitchCase="inputManageTypeEnum.Custom">
      <div>{{ textContent.customMessage }}</div>

      <mcs-item orientation="block">
        <span read-only *ngIf="netMask">
          {{ textContent.hints.ipRange }}: {{ netMask.first }} - {{ netMask.last }}
        </span>
        <mcs-form-field class="form-field-size-medium">
          <input mcsInput placeholder="Enter IP Address" #customInput
            mcsId="input-ipaddress" [formControl]="fcCustomIpAddress">

          <mcs-error mcsError errorState="required">
            {{ textContent.errors.ipAddressRequired }}
          </mcs-error>
          <mcs-error mcsError errorState="ipAddress">
            {{ textContent.errors.ipAddressInvalid }}
          </mcs-error>
          <mcs-error mcsError errorState="ipRange">
            {{ ipRangeErrorText }}
          </mcs-error>
        </mcs-form-field>
      </mcs-item>

      <mcs-data-status [dataStatusFactory]="ipAddressesStatusFactory"
        *ngIf="isIpAddressInUsed(customInput?.value)">
        <mcs-data-status-success mcsDataSuccess display-inline-block>
          <mcs-data-status-warning [@fadeInOut]>
            <span [innerHTML]="textContent.inUsedEnteredIpMessage | mcsNewLines"></span>
          </mcs-data-status-warning>
        </mcs-data-status-success>
        <mcs-data-status-in-progress mcsDataInProgress>
          <span>{{ textContent.loadingIpInUsed }}</span>
        </mcs-data-status-in-progress>
      </mcs-data-status>
    </mcs-section>
  </div>
</form>