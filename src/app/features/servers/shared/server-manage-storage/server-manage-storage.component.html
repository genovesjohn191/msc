<!-- Storage header and switcher -->
<div class="space-between-inline-items">
  <div><ng-content select="[mcsManageStorageHeader]"></ng-content></div>
  <a *ngIf="inputManageType === inputManageTypeEnum.Custom"
    (click)="onChangeInputManageType(inputManageTypeEnum.Slider)">
    {{ textContent.sliderSwitch }}</a>
  <a *ngIf="inputManageType === inputManageTypeEnum.Slider"
    (click)="onChangeInputManageType(inputManageTypeEnum.Custom)">
    {{ textContent.customSwitch }}</a>
</div>

<!-- Storage profiles selection and details template -->
<ng-container *ngIf="!detailsTemplate;else detailsTemplate">
  <mcs-form-field >
    <mcs-select [(ngModel)]="selectedStorage" placeholder="Select storage profile">
      <mcs-select-group header="Storage Profiles">
        <mcs-select-item *ngFor="let storage of storages" [value]="storage">
          {{ storage.name }}
        </mcs-select-item>
      </mcs-select-group>
    </mcs-select>
  </mcs-form-field>
</ng-container>

<div *ngIf="hasAvailableMemory" [ngSwitch]="inputManageType" [ngStyle]="{height: '140px'}">
  <!-- Slider selection mode -->
  <div [@fadeIn] *ngSwitchCase="inputManageTypeEnum.Slider">
    <div class="space-bottom-large">
      <span>{{ textContent.sliderMessage }} </span>
      <!-- We need to hardcode this instead of putting
      in the text-config since it is using a pipe -->
      <span>This storage profile has {{ availableMemory | mcsDataSize: 'GB' }} of usable capacity.</span>
    </div>

    <mcs-slider [min]="minValueGB" [max]="availableMemory" [step]="10"
      [(ngModel)]="storageValue" (change)="onSliderChanged($event)">
    </mcs-slider>
    <div class="block-items centered">
      <strong>{{ storageValue | mcsDataSize: 'GB' }}</strong>
    </div>
  </div>

  <!-- Custom storage mode -->
  <div [@fadeIn] *ngSwitchCase="inputManageTypeEnum.Custom">
    <p>{{ textContent.customMessage }}</p>

    <form [formGroup]="fgServerStorage" class="inline-items-small">
      <mcs-form-field class="form-field-size-small">
        <input mcsInput placeholder="Enter storage"
          [(ngModel)]="customStorageValue"
          [formControl]="fcCustomStorage">
        <mcs-suffix mcsSuffix>{{ textContent.unit }}</mcs-suffix>

        <mcs-hint mcsHint align="start">
          {{ textContent.maximumStorage }}: {{ availableMemory | mcsDataSize: 'GB' }}
        </mcs-hint>
        <mcs-error mcsError errorState="required">
          {{ textContent.errors.storageRequired }}
        </mcs-error>
        <mcs-error mcsError errorState="numeric">
          {{ textContent.errors.storageNumeric }}
        </mcs-error>
        <mcs-error mcsError errorState="min">
          {{ storageMinValueText }}
        </mcs-error>
        <mcs-error mcsError errorState="storageAvailable">
          {{ storageAvailableText }}
        </mcs-error>
      </mcs-form-field>
    </form>
  </div>
</div>

<!-- Insufficient Storage Capacity Warning Message -->
<div *ngIf="!hasAvailableMemory" [@fadeIn]>
  <mcs-data-status-warning>
    <ng-content select="[mcsManageStorageWarning]"></ng-content>
  </mcs-data-status-warning>
</div>