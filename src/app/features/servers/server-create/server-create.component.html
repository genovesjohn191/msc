<mcs-page [header]="textContent.header">
  <!-- Top Panel -->
  <mcs-top-panel *mcsTopPanelDef>

    <!-- Back to Servers -->
    <mcs-top-panel-item *mcsTopPanelItemDef class="no-border">
      <mcs-action-item class="right-align" (click)="gotoServers()"
        mcsId
        mcsEventTracker="back-to-server-listing"
        mcsEventCategory="server"
        mcsEventLabel="create-new-server-page">
        <mcs-icon [key]="backIconKey" size="large"></mcs-icon>
        <span>{{ textContent.backToServers }}</span>
      </mcs-action-item>
    </mcs-top-panel-item>
  </mcs-top-panel>

  <!-- Content Panel -->
  <mcs-content-panel *mcsContentPanelDef>

    <mcs-wizard [header]="textContent.header">

      <!-- Server Details Step-->
      <mcs-wizard-step [stepTitle]="textContent.serverDetailsStep.title"
        [stepControl]="faCreationForm">

        <div class="limited-view">
            <div class="contextual-help-page-wrapper">
              <mcs-form-field class="space-bottom-medium">
                <mcs-select placeholder="Select a VDC" required
                  mcsId="select-resource"
                  (change)="onChangeResource($event)"
                  [mcsContextualHelp]="textContent.vdcDropdownList.helpText">

                  <mcs-option-group>
                    <ng-container *mcsOptionGroupHeader>
                      {{ textContent.vdcDropdownList.header }}
                    </ng-container>

                    <mcs-option [value]="item" *ngFor="let item of resources$ | async">
                      {{ getResourceDisplayedText(item) }}
                    </mcs-option>
                  </mcs-option-group>
                </mcs-select>
              </mcs-form-field>

              <mcs-server-create-details></mcs-server-create-details>
            </div>
        </div>
      </mcs-wizard-step>

      <ng-container *ngIf="resource$ | async as resource">
        <!-- Add-ons Step -->
        <mcs-wizard-step *ngIf="resource?.serviceType === serviceTypeEnum.Managed"
          [stepTitle]="textContent.serverAddOnsStep.title">
          <mcs-server-create-addons></mcs-server-create-addons>
        </mcs-wizard-step>

        <!-- Confirm Step  -->
        <mcs-wizard-step *ngIf="resource?.serviceType === serviceTypeEnum.Managed"
          [stepTitle]="textContent.serverConfirmStep.title">
          <mcs-server-create-confirm></mcs-server-create-confirm>
        </mcs-wizard-step>
      </ng-container>

      <!-- Go! Step  -->
      <mcs-wizard-step [stepTitle]="textContent.serverProvisioningStep.title">
        <mcs-server-create-provisioning></mcs-server-create-provisioning>
      </mcs-wizard-step>
    </mcs-wizard>

    <!-- Quote Widget -->
    <!-- TODO: The value should be changed when order endpoint was finalized -->
    <ng-container *ngIf="(resource$ | async)?.serviceType === serviceTypeEnum.Managed">
      <mcs-quote-widget>
        <ng-container mcsQuoteWidgetHeader>
          <span>Total Cost: $200</span>
        </ng-container>

        <div class="space-between-inline-items">
          <span>- Monthly cost</span>
          <span>: $150</span>
        </div>

        <div class="space-between-inline-items">
          <span>- One-off cost</span>
          <span>: $50</span>
        </div>
      </mcs-quote-widget>
    </ng-container>

  </mcs-content-panel>
</mcs-page>