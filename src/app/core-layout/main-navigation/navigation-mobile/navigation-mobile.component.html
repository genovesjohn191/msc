<!-- Products Mega Menu Pop-over -->
<ng-template #productMegaMenuTemplate>
  <div class="product-megamenu-mobile-wrapper" mcsScrollable>
    <mcs-data-status [dataStatusFactory]="productsStatusFactory">
      <mcs-data-status-success mcsDataSuccess>
        <mcs-accordion [multi]="true">
          <mcs-accordion-panel *ngFor="let catalog of productCatalogs">
            <mcs-accordion-panel-header mcsPanelHeaderDef>
              {{ catalog.name }}
            </mcs-accordion-panel-header>

            <div class="block-items-medium bordered">
              <mcs-list [header]="category.name" itemsOffset="small"
                *ngFor="let category of catalog.categories">
                <mcs-list-item *ngFor="let product of category.products">
                  <a (click)="gotoProduct(product)">{{ product.name }}</a>
                </mcs-list-item>
              </mcs-list>
            </div>
          </mcs-accordion-panel>
        </mcs-accordion>
      </mcs-data-status-success>

      <mcs-data-status-in-progress mcsDataInProgress>
        <span>{{ textContent.loadingProducts }}</span>
      </mcs-data-status-in-progress>

      <mcs-data-status-empty mcsDataEmpty>
        <span>{{ textContent.noProducts }}</span>
      </mcs-data-status-empty>

      <mcs-data-status-error mcsDataError>
        <span>{{ textContent.errorProducts }}</span>
      </mcs-data-status-error>
    </mcs-data-status>
  </div>
</ng-template>

<!-- Main navigation for mobile -->
<div class="navigation-mobile-wrapper">
  <div class="navigation-mobile-icon">
    <mcs-icon [key]="toggleIconKey" size="large" (click)="open()"></mcs-icon>
  </div>

  <!-- Macquarie Link View -->
  <div class="macquarie-link">
    <ng-container *ngIf="productCatalogFeatureIsOn; else macquarieViewTemplate">
      <a class="inline-items-xsmall" mcsPopover maxWidth="auto"
        [content]="productMegaMenuTemplate"
        theme="light" priority="high"
        placement="bottom" orientation="left"
        [placementElement]="caretIconElement">

        <span>{{ textContent.productCatalog }}</span>
        <span #caretIconElement>
          <mcs-icon [key]="caretDownIconKey"
            size="medium" color="white"></mcs-icon>
        </span>
      </a>
    </ng-container>

    <ng-template #macquarieViewTemplate>
      <a [href]="macviewUrl" target="_blank" class="inline-items-xsmall">
        <mcs-icon [key]="arrowUpIconKey" size="large"></mcs-icon>
        <span>{{ textContent.macquarieView }}</span>
      </a>
    </ng-template>
  </div>
</div>

<mcs-sliding-panel placement="left" offsetFrom="header" class="visible-small" #slidingPanel>
  <!-- Navigation list from template binding -->
  <div class="navigation-mobile-list">
    <!-- Title -->
    <div class="navigation-mobile-item navigation-mobile-title">
      <h2>{{ textContent.title }}</h2>
      <mcs-icon [key]="closeIconKey" color="white"
        mcsCursor="pointer" (click)="close()"></mcs-icon>
    </div>

    <!-- Navigation items -->
    <ng-content></ng-content>

    <!-- Logout Item -->
    <div class="navigation-item">
      <mcs-icon [key]="caretRightIconKey" color="white"></mcs-icon>
      <a mcsCursor="pointer" (click)="logout($event)">{{ textContent.signOut }}</a>
    </div>
  </div>
</mcs-sliding-panel>

