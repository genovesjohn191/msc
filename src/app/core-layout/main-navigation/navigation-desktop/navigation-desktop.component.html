<!-- Products Mega Menu Pop-over -->
<ng-template #productMegaMenuTemplate>
  <div class="product-megamenu-wrapper" mcsScrollable>
    <mcs-data-status [dataStatusFactory]="productsStatusFactory">
      <mcs-data-status-success mcsDataSuccess>
        <div class="inline-items-medium bordered product-items">
          <ng-container *ngFor="let catalog of productCatalogs">
            <mcs-presentation-panel>
              <ng-container mcsPresentationPanelHeader>
                <h2>{{ catalog.name }}</h2>
              </ng-container>

              <section>
                <mcs-list [header]="category.name" itemsOffset="small"
                  *ngFor="let category of catalog.categories">
                  <mcs-list-item *ngFor="let product of category.products">
                    <a (click)="gotoProduct(product)"
                      mcsId="select-product"
                      mcsEventTracker="select-product"
                      mcsEventCategory="navigation"
                      mcsEventLabel="main-nav">{{ product.name }}</a>
                  </mcs-list-item>
                </mcs-list>
              </section>
            </mcs-presentation-panel>
          </ng-container>
        </div>
      </mcs-data-status-success>

      <mcs-data-status-in-progress mcsDataInProgress>
        <span>{{ textContent.loadingProducts }}</span>
      </mcs-data-status-in-progress>

      <mcs-data-status-empty mcsDataEmpty>
        <span>{{ textContent.noProducts }}</span>
      </mcs-data-status-empty>

      <mcs-data-status-error mcsDataError>
        <span>{{ textContent.errorProducts }}</span>
      </mcs-data-status-error>
    </mcs-data-status>
  </div>
</ng-template>

<!-- Main navigation for desktop/tablet -->
<div class="navigation-desktop-wrapper">

  <!-- Navigation list from template binding -->
  <ng-content></ng-content>

  <!-- Macquarie Link View -->
  <div class="macquarie-link">
    <ng-container *ngIf="productCatalogFeatureIsOn; else macquarieViewTemplate">
      <a class="inline-items-xsmall" mcsPopover maxWidth="auto"
        [content]="productMegaMenuTemplate"
        theme="light" priority="high"
        placement="bottom" orientation="left"
        [placementElement]="caretIconElement">

        <span>{{ textContent.productCatalog }}</span>
        <span #caretIconElement>
          <mcs-icon [key]="caretDownIconKey"
            size="medium" color="white"></mcs-icon>
        </span>
      </a>
    </ng-container>

    <ng-template #macquarieViewTemplate>
      <a [href]="macviewUrl" target="_blank" class="inline-items-xsmall"
        mcsId="macquarie-view"
        mcsEventTracker="macquarie-view"
        mcsEventCategory="navigation"
        mcsEventLabel="main-nav">
        <mcs-icon [key]="arrowUpIconKey" size="large"></mcs-icon>
        <span>{{ textContent.macquarieView }}</span>
      </a>
    </ng-template>
  </div>
</div>