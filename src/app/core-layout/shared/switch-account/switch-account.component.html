<!-- Switch trigger -->
<section>
  <span>{{ textContent?.header }}</span>

  <!-- Default account -->
  <mcs-list header="Default">
    <mcs-list-item mcsCursor="pointer"
      (click)="selectAccount(defaultAccount)"
      mcsId="select-account"
      mcsEventTracker="use-default-account"
      mcsEventCategory="navigation"
      mcsEventLabel="switch-account-panel">

      <mcs-item>
        <mcs-icon [key]="arrowUpBueIconKey" size="small"></mcs-icon>
        <a class="unstyled-link">{{ getTextFormat(defaultAccount) }}</a>
      </mcs-item>
    </mcs-list-item>
  </mcs-list>

  <!-- Company list search -->
  <mcs-search #search></mcs-search>

  <!-- Company listing -->
  <mcs-list class="company-list">
    <ng-container *mcsListHeader>
      <mcs-item read-only>
        <span>Company Accounts</span>
        <span mcsAlign="end" *ngIf="dataStatus === dataStatusEnum.Success">
          {{ filteredRecordCount }}/{{ totalRecordsCount }}
        </span>
      </mcs-item>
    </ng-container>

    <mcs-list-item *ngFor="let item of displayedCompanies; trackBy: trackByFn"
      (click)="selectAccount(item)" mcsCursor="pointer"
      mcsId="switch-to-account"
      mcsEventTracker="switch-to-account"
      mcsEventCategory="navigation"
      mcsEventLabel="switch-account-panel"
      [mcsTooltip]="getStatusText(item.status)" mcsTooltipColor="light">

      <mcs-item>
        <mcs-icon color="white" [key]="getUserIconKey(item.status)" size="small"></mcs-icon>
        <a class="unstyled-link">{{ getTextFormat(item) }}</a>
        <mcs-icon mcsAlign="end" [key]="arrowRightBueIconKey" size="small"></mcs-icon>
      </mcs-item>
    </mcs-list-item>
  </mcs-list>

  <!-- Data obtainment status -->
  <ng-container *ngIf="dataStatus !== dataStatusEnum.Success">
    <mcs-item [ngSwitch]="dataStatus" mcsAlignContent="middle-center">
      <div *ngSwitchCase="dataStatusEnum.InProgress">
        <mcs-loader size="small"></mcs-loader>
      </div>
      <div *ngSwitchCase="dataStatusEnum.Empty">
        <span>{{ textContent.noCompanies }}</span>
      </div>
      <div *ngSwitchCase="dataStatusEnum.Error">
        <span>{{ textContent.errorMessage }}</span>
        <a (click)="retry()"
          mcsId
          mcsEventTracker="retry-loading-account-list"
          mcsEventCategory="navigation"
          mcsEventLabel="switch-account-panel"> {{ textContent.retry }}</a>
      </div>
    </mcs-item>
  </ng-container>

  <!-- Paginator that displays when data obtainment was success -->
  <mcs-paginator #paginator
    [hidden]="dataStatus !== dataStatusEnum.Success"
    [totalCount]="totalRecordsCount">
  </mcs-paginator>
</section>
