<!-- Switch trigger -->
<mcs-section>
  <span>{{ 'switchAccount.header' | translate }}</span>

  <!-- Default account -->
  <mcs-list header="Default">
    <mcs-list-item mcsCursor="pointer"
      (click)="selectAccount(defaultAccount)"
      mcsId="select-account"
      mcsEventTracker="use-default-account"
      mcsEventCategory="navigation"
      mcsEventLabel="switch-account-panel">

      <mcs-item>
        <mcs-icon [key]="arrowUpBueIconKey" size="small"></mcs-icon>
        <a class="unstyled-link">{{ getTextFormat(defaultAccount) }}</a>
      </mcs-item>
    </mcs-list-item>
  </mcs-list>

  <!-- Company list search -->
  <mcs-search #search></mcs-search>

  <!-- Company listing -->
  <mcs-list>
    <ng-container *mcsListHeader>
      <mcs-item read-only full-width>
        <span mcsAlign="start">Company Accounts</span>
        <ng-container *ngIf="dataSource?.dataStatus !== dataStatusEnum.Error">
          <span>{{ filteredRecordCount }}/{{ dataSource?.totalRecordsCount }}</span>
        </ng-container>
      </mcs-item>
    </ng-container>

    <mcs-list-item *ngFor="let item of dataSource?.dataRecords; trackBy: trackByFn"
      (click)="selectAccount(item)" mcsCursor="pointer"
      mcsId="switch-to-account"
      mcsEventTracker="switch-to-account"
      mcsEventCategory="navigation"
      mcsEventLabel="switch-account-panel"
      [mcsTooltip]="getStatusText(item.status)" mcsTooltipColor="light">

      <mcs-item full-width>
        <mcs-icon color="white" [key]="getUserIconKey(item.status)" size="small"></mcs-icon>
        <a class="unstyled-link">{{ getTextFormat(item) }}</a>
        <mcs-icon mcsAlign="end" [key]="arrowRightBueIconKey" size="small"></mcs-icon>
      </mcs-item>
    </mcs-list-item>
  </mcs-list>

  <!-- Data obtainment status -->
  <ng-container *ngIf="dataSource?.dataStatus !== dataStatusEnum.Success">
    <mcs-item [ngSwitch]="dataSource?.dataStatus" mcsAlignContent="middle-center">
      <div *ngSwitchCase="dataStatusEnum.InProgress">
        <mcs-loader size="small"></mcs-loader>
      </div>
      <div *ngSwitchCase="dataStatusEnum.Empty">
        <span>{{ 'switchAccount.noCompanies' | translate }}</span>
      </div>
      <div *ngSwitchCase="dataStatusEnum.Error">
        <span>{{ 'switchAccount.errorMessage' | translate }}</span>
        <a (click)="retry()"
          mcsId
          mcsEventTracker="retry-loading-account-list"
          mcsEventCategory="navigation"
          mcsEventLabel="switch-account-panel"> {{ 'switchAccount.retry' | translate }}</a>
      </div>
    </mcs-item>
  </ng-container>

  <!-- Paginator that displays when data obtainment was success -->
  <mcs-paginator #paginator
    [hidden]="dataSource?.dataStatus !== dataStatusEnum.Success"
    [totalCount]="dataSource?.totalRecordsCount">
  </mcs-paginator>
</mcs-section>
